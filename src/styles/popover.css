/**
 * Popover styles - CSS Variables and Animations
 *
 * All static styling is now handled via Tailwind classes in the components.
 * This file only contains:
 * 1. CSS variables for dynamic values set via JS
 * 2. Keyframe animations
 */

/* Popover CSS Variables - dynamic values that are set via JS or used in complex calculations */
[data-blok-popover] {
  /* Layout tokens - specific to popover component */
  --width: 200px;
  --max-height: 270px;
  --item-padding: 3px;
  --item-height: calc(theme('spacing.5') + 2 * var(--item-padding));

  /* Dynamic positioning variables (set via JS) */
  --popover-top: calc(100% + theme('spacing.2'));
  --popover-left: 0;
  --nested-popover-overlap: theme('spacing.1');
}

/* Mobile offset variable */
@screen mobile {
  [data-blok-popover-container] {
    --offset: 5px;
  }
}

/* Nested popover positioning - uses CSS variables set via JS */
[data-blok-nested] [data-blok-popover-container] {
  /* Variables --nesting-level and --trigger-item-top are set via JS */
  --popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));
  position: absolute;
  top: calc(var(--trigger-item-top) - var(--nested-popover-overlap));
}

[data-blok-popover-open-top][data-blok-nested] [data-blok-popover-container] {
  top: calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + theme('spacing.2') + var(--nested-popover-overlap));
}

[data-blok-popover-open-left] [data-blok-nested] [data-blok-popover-container] {
  --popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%);
}

/* Open top/left position overrides */
[data-blok-popover-open-top] [data-blok-popover-container] {
  --popover-top: calc(-1 * (theme('spacing.2') + var(--popover-height)));
}

[data-blok-popover-open-left] [data-blok-popover-container] {
  --popover-left: calc(-1 * var(--width) + 100%);
}

/* Wobble animation for error state */
[data-blok-popover-item-icon][data-blok-popover-item-wobble] {
  @apply animate-wobble;
}
