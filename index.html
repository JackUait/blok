<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blok</title>
  <!-- Disable caching for local development -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
  <style>
    .toggle-text-swap {
      font-size: 0px;
      vertical-align: bottom;
    }

    .toggle-text-swap::before {
      display: inline;
      font-size: 13px;
      content: attr(data-default-text);
    }

    .thin-mode .thin-mode-content {
      max-width: 500px;
      border-left-width: 1px;
      border-right-width: 1px;
      border-left-style: solid;
      border-right-style: solid;
      border-color: #eee;
      padding-left: 15px;
      padding-right: 15px;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
<body class="font-sans text-sm leading-relaxed m-0 bg-white text-black">
  <div class="text-base">
    <div class="flex flex-wrap items-center h-[50px] leading-[50px] px-[30px] max-md:px-5 mb-[30px] border-b border-[#e8e8eb]">
      <a class="font-bold text-inherit no-underline" href="https://github.com/JackUait/blok">Blok</a>
    </div>
    <div class="thin-mode-content max-w-content mx-auto antialiased max-md:px-5">
      <div id="blok"></div>
      <div class="flex items-center fixed bottom-0 left-0 right-0 bg-white rounded-t-lg border-t border-[#e8e8eb] shadow-sm text-[13px] px-4 py-2 z-[1] select-none max-md:hidden">
        <div class="after:content-['|'] after:text-[#ddd] after:mx-3">
          Readonly:
          <b id="readonly-state">
            Off
          </b>
          &nbsp;
          <button class="inline-block px-3 py-[3px] rounded-full bg-[#eff1f4] hover:bg-[#e0e4eb] transition-all duration-150 cursor-pointer text-center select-none" id="toggleReadOnlyButton">
            toggle
          </button>
        </div>
        <div class="after:content-['|'] after:text-[#ddd] after:mx-3">
          <button class="inline-block px-3 py-[3px] rounded-full bg-[#eff1f4] hover:bg-[#e0e4eb] transition-all duration-150 cursor-pointer text-center select-none" id="enableThinModeButton">
            <span class="toggle-text-swap" data-default-text="Enable" data-toggled-text="Disable"></span>
            thin mode
          </button>
        </div>
      </div>
    </div>
  </div>


  <!-- Load Tools -->
  <!--
    You can upload Tools to your project's directory and connect them by relative links.

    Also you can load each Tool from CDN or use NPM/Yarn packages.
  -->

  <!-- Initialization -->
  <script type="module">
    import { Blok } from './src/blok.ts';
    import { Paragraph, Header, List, Bold, Italic, Link } from './src/tools/index.ts';

    window.Blok = Blok;

    /**
     * To initialize the Blok, create a new instance with configuration object
     * @see docs/installation.md for mode details
     */
    const blokConfig = {
      /**
       * Enable/Disable the read only mode
       */
      readOnly: false,

      /**
       * Wrapper of Blok
       */
      holder: 'blok',

      /**
       * Common Inline Toolbar settings
       * - if true (or not specified), the order from 'tool' property will be used
       * - if an array of tool names, this order will be used
       */
      // inlineToolbar: ['link', 'bold', 'italic'],
      // inlineToolbar: true,

      /**
       * Tools list
       */
      tools: {
        /**
         * Each Tool is a Plugin. Pass them via 'class' option with necessary settings {@link docs/tools.md}
         * Tool options can be flat (no nested config: {}) - Blok extracts known keys automatically.
         * inlineToolbar defaults to true for block tools.
         */
        paragraph: {
          class: Paragraph,
          preserveBlank: true,
        },
        header: {
          class: Header,
          placeholder: 'Header',
        },
        list: List,
        // Inline tools
        bold: Bold,
        italic: Italic,
        link: Link,
      },

      /**
       * This Tool will be used as default
       */
      // defaultBlock: 'paragraph',

      autofocus: true,

      /**
       * Initial Blok data
       */
      data: {
        blocks: [
          {
            id: "zcKCF1S7X8",
            type: "header",
            data: {
              text: "Blok - Block-Styled Editor",
              level: 1
            }
          },
          {
            id: "b6ji-DvaKb",
            type: "paragraph",
            data: {
              text: "Hey. Meet the new Blok. On this page you can see it in action â€” try to edit this text. Source code of the page contains the example of connection and configuration."
            }
          },
          {
            type: "header",
            id: "7ItVl5biRo",
            data: {
              text: "Header Levels",
              level: 2
            }
          },
          {
            id: "header-h1-example",
            type: "header",
            data: {
              text: "Heading 1 - Main Title",
              level: 1
            }
          },
          {
            id: "header-h2-example",
            type: "header",
            data: {
              text: "Heading 2 - Section Title",
              level: 2
            }
          },
          {
            id: "header-h3-example",
            type: "header",
            data: {
              text: "Heading 3 - Subsection Title",
              level: 3
            }
          },
          {
            id: "header-h4-example",
            type: "header",
            data: {
              text: "Heading 4 - Component Title",
              level: 4
            }
          },
          {
            id: "header-h5-example",
            type: "header",
            data: {
              text: "Heading 5 - Minor Title",
              level: 5
            }
          },
          {
            id: "header-h6-example",
            type: "header",
            data: {
              text: "Heading 6 - Smallest Title",
              level: 6
            }
          },
          {
            type: "header",
            id: "QZFox1m_ul",
            data: {
              text: "Inline Formatting",
              level: 2
            }
          },
          {
            id: "inline-example",
            type: "paragraph",
            data: {
              text: "You can make text <b>bold</b>, <i>italic</i>, or add <a href=\"https://github.com/JackUait/blok\">links</a>. Select any text to see the inline toolbar."
            }
          },
          {
            type: "header",
            id: "list-section-header",
            data: {
              text: "List Types",
              level: 2
            }
          },
          {
            type: "header",
            id: "unordered-list-header",
            data: {
              text: "Unordered List (Bulleted)",
              level: 3
            }
          },
          {
            id: "unordered-list-1",
            type: "list",
            data: {
              style: "unordered",
              text: "First item"
            }
          },
          {
            id: "unordered-list-2",
            type: "list",
            data: {
              style: "unordered",
              text: "Second item"
            }
          },
          {
            id: "unordered-list-3",
            type: "list",
            data: {
              style: "unordered",
              text: "Third item with <b>bold text</b>"
            }
          },
          {
            type: "header",
            id: "ordered-list-header",
            data: {
              text: "Ordered List (Numbered)",
              level: 3
            }
          },
          {
            id: "ordered-list-1",
            type: "list",
            data: {
              style: "ordered",
              text: "First step"
            }
          },
          {
            id: "ordered-list-2",
            type: "list",
            data: {
              style: "ordered",
              text: "Second step"
            }
          },
          {
            id: "ordered-list-3",
            type: "list",
            data: {
              style: "ordered",
              text: "Third step"
            }
          },
          {
            type: "header",
            id: "checklist-header",
            data: {
              text: "Checklist (Todo)",
              level: 3
            }
          },
          {
            id: "checklist-1",
            type: "list",
            data: {
              style: "checklist",
              text: "Learn Blok editor",
              checked: true
            }
          },
          {
            id: "checklist-2",
            type: "list",
            data: {
              style: "checklist",
              text: "Build something awesome"
            }
          },
          {
            id: "checklist-3",
            type: "list",
            data: {
              style: "checklist",
              text: "Share with the world"
            }
          },
          {
            type: "header",
            id: "nested-list-header",
            data: {
              text: "Nested Lists",
              level: 3
            }
          },
          {
            id: "nested-list-1",
            type: "list",
            data: {
              style: "unordered",
              text: "Main item"
            }
          },
          {
            id: "nested-list-2",
            type: "list",
            data: {
              style: "unordered",
              text: "Nested item (press Tab to indent)",
              depth: 1
            }
          },
          {
            id: "nested-list-3",
            type: "list",
            data: {
              style: "unordered",
              text: "Double nested item",
              depth: 2
            }
          },
          {
            id: "nested-list-4",
            type: "list",
            data: {
              style: "unordered",
              text: "Back to main level"
            }
          },
        ]
      },
      onChange: function(api, event) {
        console.log('something changed', event);
      },
    }
    /**
    * To initialize the Blok, create a new instance with configuration object
    * @see docs/installation.md for mode details
    */
    var blok = new Blok(blokConfig);

    /**
    * Toggle read-only button
    */
    const toggleReadOnlyButton = document.getElementById('toggleReadOnlyButton');
    const readOnlyIndicator = document.getElementById('readonly-state');

    /**
    * Toggle read-only example
    */
    toggleReadOnlyButton.addEventListener('click', async () => {
      const readOnlyState = await blok.readOnly.toggle();

      readOnlyIndicator.textContent = readOnlyState ? 'On' : 'Off';
    });

    /**
    * Button for enabling the 'Thin' mode
    */
    const enableThinModeButton = document.getElementById("enableThinModeButton");

    enableThinModeButton.addEventListener('click', () => {
      document.body.classList.toggle("thin-mode")

      blok.destroy();

      blok = new Blok(blokConfig);
    })

    window.blok = blok;
  </script>
</body>
</html>
